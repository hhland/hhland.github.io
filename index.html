<!DOCTYPE html>
<html lang="en">

<head>
    <base target="_blank"/>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Landing Page - Start Bootstrap Theme</title>

    <script type="text/javascript" src="http://smartken.github.io/cdn/bootcdn.js"></script>
    <script type="text/javascript" src="http://smartken.github.io/cdn/rawgithub.js"></script>	
    <script type="text/javascript" >
	   Bootcdn.importNormalize();
	   Bootcdn.importFontawesome();
	</script>

    <!-- Custom CSS -->
    <link href="css/landing-page.css" rel="stylesheet">

    <style>
	 div.row{
	   margin-bottom:20px;
	 }
	
	.demo-browser-content img.icon {
  float: left;
  width: 102px;
  margin: 0 15px 20px 0;
  border: 6px solid #fff;
  }
	
	</style>
    
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" data-bind="with:ownerinfo">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" data-bind="text:'Start Bootstrap '"></a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
				    
                    <li>
					    
                        <a data-bind="attr:{href:html_url}">
						
						  <span data-bind="text:login"></span>
						  
						</a>
                    </li>
                    <li>
                        <a data-bind="attr:{href:html_url+'?tab=repositories'}">Repositories</a>
                    </li>
                    <li>
                        <a data-bind="attr:{href:html_url+'?tab=activity'}">Activity</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Header -->
    <div class="intro-header">

        <div class="container"  >

            <div class="row" data-bind="with:siteinfo">
                <div class="col-lg-12">
                    <div class="intro-message">
                        <h1 data-bind="text:name">Landing Page</h1>
                        <h3 data-bind="text:description">A Template by Start Bootstrap</h3>
                        <hr class="intro-divider">
                        <ul class="list-inline intro-social-buttons">
                            <li>
                                <a href="#repos" target="_self" class="btn btn-default btn-lg"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Last 10 Repositories</span></a>
                            </li>
                            <li>
                                <a href="#following" target="_self" class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">Following</span></a>
                            </li>
                            <li>
                                <a href="#followers" target="_self" class="btn btn-default btn-lg"><i class="fa fa-linkedin fa-fw"></i> <span class="network-name">Followers</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

		
			
        </div>
        <!-- /.container -->

    </div>
    <!-- /.intro-header -->

    <!-- Page Content -->
    <div >
   
   
   <div id="repos" class="content-section-a" >

			<div class="container" data-bind="foreach:{data:repos,afterRender:afterRanderRepo}" >

            <div class="row repo" data-bind="attr:{id:'repo_'+name}">
                <div class="col-lg-7 col-sm-7">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading" data-bind="text:name"></h2>
                    <p class="lead" data-bind="text:description"></p>
					<hr />
					<div class="sample" data-bind="attr:{id:'sample_'+name,repo:name,has_issues:has_issues?1:0}"></div>
					<hr />
					<ul class="list-inline banner-social-buttons">
					    <li>
                            <a data-bind="attr:{href:html_url}" class="btn btn-block btn-lg btn-default"><i class="fa fa-github fa-fw"></i> <span class="network-name">Github</span></a>
                        </li>
                        <li>
                            <a data-bind="attr:{href:html_url+'/commits/'+default_branch }" class="btn btn-block btn-lg btn-info"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Commits</span></a>
                        </li>
                        
                        <li>
                            <a data-bind="attr:{href:html_url+'/branches'}" class="btn btn-block btn-lg btn-warning"><i class="fa fa-facebook fa-fw"></i> <span class="network-name">Branches</span></a>
                        </li>
						
						<li>
                            <a data-bind="visible:has_issues,attr:{href:'http://smartken.github.io?repo='+name+'&owner='+owner.login }" class="btn btn-block btn-lg btn-primary"><i class="fa fa-linkedin fa-fw"></i> <span class="network-name">Blog</span></a>
                        </li>
						
                    </ul>
                </div>
							<div class="col-lg-5 col-sm-5" style="background-image:url(img/sample-error.jpg); background-repeat:no-repeat;background-position:20px 15px; background-size:90% auto;"  >
								  <div data-bind="style:{backgroundImage:'url(http://cdn.rawgit.com/'+full_name+'/'+default_branch+'/site.sample.jpg)'}" style="background-size:100% auto;background-repeat:no-repeat"
								  >
										<div class="login" style="background-size:100% auto;"></div>
								
								</div>
									
                   
                </div>
            </div>

        </div>
        <!-- /.container -->
			

    </div>
    <!-- /.content-section-a -->
	
	
	<div id="followers" class="content-section-a">

        <div class="container">
            <span style="padding-left:30px">Followers</span>
            <div class="demo-browser" style="margin-top:-35px">
					
            
              		
			<div class="demo-browser-content" data-bind="foreach:{data:followers}" style="min-height:300px" >
							<a data-bind="attr:{href:'?owner='+login,title:login}">
              <img class="icon" data-bind="attr:{src:avatar_url,alt:avatar_url}"   />
			  
							</a>
            </div>
			
			
			
          </div>
        </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->
	
    
    <div id="following" class="content-section-b">

        <div class="container">
              <span style="padding-left:30px">Following</span>
            <div class="demo-browser" style="margin-top:-35px">
					
            <div class="demo-browser-side" data-bind="with:ownerinfo">
              <div class="demo-browser-author" data-bind="style:{backgroundImage:'url('+avatar_url+')'}"></div>
			  
              <div class="demo-browser-action">
			    <form data-bind="attr:{action:'https://api.github.com/user/following/'+login}" method="PUT">
				   <button type="submit" class="btn btn-danger btn-lg btn-block" href="http://twitter.com/monstercritic" target="_blank">
                    <span class="fui-plus"></span>Follow
                  </button>
				</form>
               
              </div>
              <h5>@monstercritic</h5>
              <h6>
                Tourist. Designer. NYC
                <a href="http://shmidt.in" target="_blank">shmidt.in</a>
              </h6>
            </div>
              		
			<div class="demo-browser-content" data-bind="foreach:{data:following}" style="min-height:300px" >
							<a data-bind="attr:{href:'?owner='+login,title:login}">
              <img class="icon" data-bind="attr:{src:avatar_url,alt:avatar_url}"   />
			  
							</a>
            </div>
          </div>
        </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-b -->
   

    

    <div class="banner">

        <div class="container">

            <div class="row">
                <div class="col-lg-6">
                    <h2>Connect to Start Bootstrap:</h2>
                </div>
                <div class="col-lg-6">
                    <ul class="list-inline banner-social-buttons">
                        <li>
                            <a href="https://twitter.com/SBootstrap" class="btn btn-default btn-lg"><i class="fa fa-twitter fa-fw"></i> <span class="network-name">Twitter</span></a>
                        </li>
                        <li>
                            <a href="https://github.com/IronSummitMedia/startbootstrap" class="btn btn-default btn-lg"><i class="fa fa-github fa-fw"></i> <span class="network-name">Github</span></a>
                        </li>
                        <li>
                            <a href="#" class="btn btn-default btn-lg"><i class="fa fa-linkedin fa-fw"></i> <span class="network-name">Linkedin</span></a>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.banner -->

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <ul class="list-inline">
                        <li>
                            <a href="#home">Home</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#about">About</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#services">Services</a>
                        </li>
                        <li class="footer-menu-divider">&sdot;</li>
                        <li>
                            <a href="#contact">Contact</a>
                        </li>
                    </ul>
                    <p class="copyright text-muted small">Copyright &copy; Your Company 2014. All Rights Reserved</p>
                </div>
            </div>
        </div>
    </footer>

     <script type="text/javascript">
	     Bootcdn.importJquery();
		 Bootcdn.importBootstrap();
		 Bootcdn.importKnockout();
		 Bootcdn.importJsurl();
		 Bootcdn.importMarked();
		 Rawgithub.importFlatui();
	</script>	
	<script type="text/javascript" src="cdn/githubapi.js"></script>
	 <script type="text/javascript">
		 var owner=url("?owner")||"hhland"
		 ,_repo=owner+".github.io"
		 ;
		 
		 var viewModel=function(){
		     this.siteinfo=ko.observable({url:"",description:""});
			 this.ownerinfo=ko.observable({login:"",html_url:"",avatar_url:""});
			  this.repos=ko.observableArray([]);
			  
			  this.following=ko.observableArray([]);
			  this.followers=ko.observableArray([]);
			  
			 this.afterRanderRepo=function(e,repo){  return;
			    var repo_name=repo.name;
			    var grepo=githubuser.repo(repo_name);
			    var elid="#sample_"+repo_name;
				grepo.issues({labels:"site"},function(issues){
					for(var i=0;i<issues.length;i++){
					   var issue=issues[i];
						 if(issue["title"]!="sample")continue;
						 var html=marked(issue["body"]);
						 $(elid).html(html);
						 break;
					}
				});
				console.log(elid);
			 };
		 };
		 
		 var vm=new viewModel();
		 
		 $(document).ready(function(){
		     ko.applyBindings(vm);
		 });
		 
		 
		 
		 var githubuser=new Github.User(owner);
		 var githubrepo=githubuser.repo(_repo);
		 
		 var loadSample=function(){
		   var $sample=$("div.sample:empty:first");
		   if($sample.length<=0)return;
		   var _repo=$sample.attr("repo"),has_issues=$sample.attr("has_issues");
		   var grepo=githubuser.repo(_repo);
		   var newissueurl="https://github.com/"+owner+"/"+_repo+"/issues/new"
		   ,settingurl="https://github.com/"+owner+"/"+_repo+"/settings"
		   ;
		   var a_newissue="<a href='"+newissueurl+"'>new issue<"+"/a>"
		   ,a_setting="<a href='"+settingurl+"'>"+_repo+" Setting<"+"/a>"
		   
		   ;
		   if(has_issues==0){
		       $sample.addClass("alert alert-danger").html("The repositorie is not allow issues. <br/>If your're the owner ,you can resolve the problem by ...<ol type='1'>"
			   +"<li>Enable the Features Issues in "+a_setting+"</li>"
			   +"<li>Add issue(label='site',title='sample') in  "+a_newissue+"</li>"
			   +"<li>Reload the page </li>"
			   +"</ol>");
			   loadSample();
			   return;
		   }
		   grepo.issues({labels:"site"},function(issues){
					var sample;
					for(var i=0;i<issues.length;i++){
					   var issue=issues[i];
					   if(issue["title"]="sample"){
						 sample=issue;
						 break;
					   }
					}
					if(sample){
					  var html=marked(issue["body"]);
						 $sample.html(html);
					}else{
					   
					   $sample.addClass("alert alert-warning").html("There is no sample in the repositorie!</br >If your're the owner ,you can resolve the problem by ...<ol type='1'> "
					   
			           +"<li>Add issue(label='site',title='sample') in  "+a_newissue+"</li>"
			   +"<li>Reload the page </li>"
			   +"</ol>");
					}
					loadSample();
			});
		 };
		 
		 githubuser.repos({sort:'updated',direction:'desc'},function(repos){
		    console.log(repos);
			var repos0=[];
			for(var i=0;i<repos.length&&i<10;i++){
			   var repo=repos[i];
			   if(repo["has_pages"]){
			   
			   vm.siteinfo(repo);
		       vm.ownerinfo(repo["owner"]);
			   continue;
			   };
			   repos0.push(repo);
			}
			vm.repos(repos0);
			loadSample();
			
		 });
		 
		 
		 
		 githubuser.following(function(following){
		    console.log(following);
			  vm.following(following);
		 });
		
		 githubuser.followers(function(followers){
		    console.log(followers);
			  vm.followers(followers);
		 });
		 
	 </script>
	 
	     <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>

</body>

</html>
